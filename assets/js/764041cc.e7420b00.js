"use strict";(self.webpackChunkten_docs=self.webpackChunkten_docs||[]).push([[5979],{2150:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"getting-started/for-validators/running-a-node","title":"Running a TEN Validator Node on Azure","description":"This guide provides detailed instructions to set up and manage a TEN Validator Node on Azure using Terraform and Ansible. Due to TEN\u2019s use of SGX architecture and cloud-specific security assurances, all current deployments are limited to cloud infrastructure to mitigate risks associated with physical attacks. A proof-of-cloud assertion, provided by TEN, certifies the security and reliability of each validator node running in the cloud.","source":"@site/docs/getting-started/for-validators/running-a-node.md","sourceDirName":"getting-started/for-validators","slug":"/getting-started/for-validators/running-a-node","permalink":"/docs/getting-started/for-validators/running-a-node","draft":false,"unlisted":false,"editUrl":"https://github.com/ten-protocol/ten-documentation/blob/main/docs/getting-started/for-validators/running-a-node.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Node Architecture","permalink":"/docs/getting-started/for-validators/node-architecture"},"next":{"title":"Architecture","permalink":"/docs/category/architecture"}}');var i=r(4848),s=r(8453);const o={sidebar_position:4},a="Running a TEN Validator Node on Azure",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Clone the TEN Validator Repository",id:"clone-the-ten-validator-repository",level:2},{value:"Azure Setup Instructions (Terraform)",id:"azure-setup-instructions-terraform",level:2},{value:"Step 1: Authenticate and Configure Azure",id:"step-1-authenticate-and-configure-azure",level:3},{value:"Step 2: Configure Terraform Variables (optional)",id:"step-2-configure-terraform-variables-optional",level:3},{value:"Step 3: Deploy the Terraform Script",id:"step-3-deploy-the-terraform-script",level:3},{value:"Step 4: Access the Validator Node (Optional)",id:"step-4-access-the-validator-node-optional",level:3},{value:"TEN Validator Setup Instructions (Ansible)",id:"ten-validator-setup-instructions-ansible",level:2},{value:"Managing the Validator Node",id:"managing-the-validator-node",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"running-a-ten-validator-node-on-azure",children:"Running a TEN Validator Node on Azure"})}),"\n",(0,i.jsx)(n.p,{children:"This guide provides detailed instructions to set up and manage a TEN Validator Node on Azure using Terraform and Ansible. Due to TEN\u2019s use of SGX architecture and cloud-specific security assurances, all current deployments are limited to cloud infrastructure to mitigate risks associated with physical attacks. A proof-of-cloud assertion, provided by TEN, certifies the security and reliability of each validator node running in the cloud."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["The deployment process leverages ",(0,i.jsx)(n.strong,{children:"Terraform"})," for Azure infrastructure provisioning and ",(0,i.jsx)(n.strong,{children:"Ansible"})," for configuring the Validator Node. By following this guide, you\u2019ll set up a secure, compliant environment that meets TEN\u2019s standards for validator operations."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Terraform"}),": Automates the creation of Azure resources for a TEN Validator Node."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ansible"}),": Configures and deploys node software on the provisioned infrastructure."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsx)(n.p,{children:"Before starting, ensure the following dependencies are installed on your local machine:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.terraform.io/downloads.html",children:(0,i.jsx)(n.strong,{children:"Terraform"})})," (version >= 0.12)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli",children:"Terraform Installation Guide"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html",children:(0,i.jsx)(n.strong,{children:"Ansible"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html",children:"Ansible Installation guide"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Required Ansible Collections"}),": Install with:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"ansible-galaxy collection install community.docker community.crypto\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli",children:(0,i.jsx)(n.strong,{children:"Azure CLI"})}),": For authenticating and managing Azure resources."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.docker.com/get-docker/",children:(0,i.jsx)(n.strong,{children:"Docker"})}),": Required for node deployment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/install/",children:(0,i.jsx)(n.strong,{children:"Docker Compose"})}),": Used for managing containerized services."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://git-scm.com/downloads",children:(0,i.jsx)(n.strong,{children:"Git"})}),": For repository cloning and version control."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"clone-the-ten-validator-repository",children:"Clone the TEN Validator Repository"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git clone https://github.com/ten-protocol/ten-validator.git\ncd ten-validator\n"})}),"\n",(0,i.jsx)(n.h2,{id:"azure-setup-instructions-terraform",children:"Azure Setup Instructions (Terraform)"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-authenticate-and-configure-azure",children:"Step 1: Authenticate and Configure Azure"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Log into Azure"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"az login\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Set Your Azure Subscription: Specify the Azure subscription for deploying the resources:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"az account set --subscription <your-subscription-id>\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-configure-terraform-variables-optional",children:"Step 2: Configure Terraform Variables (optional)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cp terraform.tfvars.example terraform.tfvars\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-deploy-the-terraform-script",children:"Step 3: Deploy the Terraform Script"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"terraform init\nterraform apply\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-4-access-the-validator-node-optional",children:"Step 4: Access the Validator Node (Optional)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"chmod +x get-key.sh ./get-key.sh"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ssh -i <path-to-key> <username>@<public-ip>"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ten-validator-setup-instructions-ansible",children:"TEN Validator Setup Instructions (Ansible)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Network Configuration: Node network settings are located in ",(0,i.jsx)(n.code,{children:"ansible/files/network_vars.yml"}),". These settings are typically not changed and are specific to the L2 network. One will be provided by the TEN team for ITN (testnet) and another for mainnet."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Run the Installation Script: Use Ansible to configure and deploy the TEN Validator Node:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"chmod +x install-ten.sh\n./install-ten.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"During deployment, you will be prompted to enter:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Host ID: Public key of the validator node wallet"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Private Key: Private key of the validator node wallet"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Host Public P2P Address: Public IP or DNS of the node"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"SSH Details: Username and key path (or password if applicable)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"L1 WS URL: WebSocket URL for the Layer 1 node (e.g., Infura)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Postgres DB Host: Leave blank to provision a new database"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Note: If Terraform provisioned the VM, default values are often applicable\u2014just press Enter to accept."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"managing-the-validator-node",children:"Managing the Validator Node"}),"\n",(0,i.jsx)(n.p,{children:"Coming soon! (monitoring, backups, tear down, etc.)"})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var t=r(6540);const i={},s=t.createContext(i);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);