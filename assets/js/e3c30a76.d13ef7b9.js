"use strict";(self.webpackChunkten_docs=self.webpackChunkten_docs||[]).push([[9903],{1195:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>m});const a=JSON.parse('{"id":"smart-contract-features/transaction-timestamp","title":"Precise transaction timestamp","description":"Real-time games require users to make quick decisions, and the outcomes depend on the precise moment in time when the action was made.","source":"@site/docs/3-smart-contract-features/4-transaction-timestamp.md","sourceDirName":"3-smart-contract-features","slug":"/smart-contract-features/transaction-timestamp","permalink":"/docs/smart-contract-features/transaction-timestamp","draft":false,"unlisted":false,"editUrl":"https://github.com/ten-protocol/ten-documentation/blob/main/docs/3-smart-contract-features/4-transaction-timestamp.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Native commit-reveal","permalink":"/docs/smart-contract-features/native-commit-reveal"},"next":{"title":"Write a TEN dApp","permalink":"/docs/category/write-a-ten-dapp"}}');var s=n(4848),i=n(8453);const r={sidebar_position:4},o="Precise transaction timestamp",c={},m=[{value:"Option 1 - External Timestamp oracle",id:"option-1---external-timestamp-oracle",level:3},{value:"TEN - Native timestamp oracle",id:"ten---native-timestamp-oracle",level:3},{value:"How it works",id:"how-it-works",level:2},{value:"Example",id:"example",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"precise-transaction-timestamp",children:"Precise transaction timestamp"})}),"\n",(0,s.jsx)(t.p,{children:"Real-time games require users to make quick decisions, and the outcomes depend on the precise moment in time when the action was made.\nThis doesn't work well on-chain because latencies are not low enough."}),"\n",(0,s.jsx)(t.h3,{id:"option-1---external-timestamp-oracle",children:"Option 1 - External Timestamp oracle"}),"\n",(0,s.jsx)(t.p,{children:'A standard Ethereum smart contract does not have access to the timestamp of a transaction.\nThe reason is that the "clock" of the user is not trusted, and a network like "Ethereum" is decentralised and there is no trusted "clock".'}),"\n",(0,s.jsx)(t.p,{children:'A dApp wanting to timestamp a transaction would have to use a trusted "Oracle" to sign over a payload containing the tx hash and the timestamp.\nAnd then create another Ethereum transaction with this payload, and the smart contract matching the previous action with this proof.\nThis approach is very complex with multiple on-chain transactions and adds even more latency.'}),"\n",(0,s.jsx)(t.h3,{id:"ten---native-timestamp-oracle",children:"TEN - Native timestamp oracle"}),"\n",(0,s.jsx)(t.p,{children:"The TEN protocol provides a native timestamp oracle, and a system smart contract which exposes this information to smart contracts."}),"\n",(0,s.jsx)(t.p,{children:'The trusted authority is the "Sequencer" node which is running in a Trusted Execution Environment (TEE).'}),"\n",(0,s.jsx)(t.p,{children:"Each transaction is accompanied by the precise timestamp when included in a block."}),"\n",(0,s.jsx)(t.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,s.jsxs)(t.p,{children:['TEN provides a "System Contract" (a contract deployed and known by the platform.)\nYou can get the address of the system contract for our testnet ',(0,s.jsx)(t.a,{href:"https://sepolia.tenscan.io/resources/verified-data",children:"here"})," - under ",(0,s.jsx)(t.code,{children:"TenSystemCalls"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"The interface you must implement is:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-solidity",children:"interface ITimestamp {\n    function getTransactionTimestamp() external returns (uint256);\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-solidity",children:"\n// TEN provides a system contract that returns the precise timestamp of the calling transaction\ninterface ITimestamp {\n    function getTransactionTimestamp() external returns (uint256);\n}\n\ncontract CoinFlip {\n    private ITimestamp timestamp;\n\n    // you have to pass in the address of the system contract\n    constructor(address _timestampSystemAddress) {\n        timestamp = ITimestamp(_timestampSystemAddress);\n    }\n\n    function getRandomNumber() internal view returns (uint256) {\n        return rnd.getRandomNumber();\n    }\n}\n"})})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var a=n(6540);const s={},i=a.createContext(s);function r(e){const t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);